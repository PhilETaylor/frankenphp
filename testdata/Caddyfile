{
	#debug
	frankenphp {
		max_threads 0
		worker {
			file /go/src/app/testdata/worker-with-counter.php
			#watch ./**/*.{php,yaml,yml,twig,env}
			num 7
		}
		#worker /go/src/app/testdata/debug.php
		php_ini max_execution_time -1
		php_ini max_execution_time 5
		php_ini max_execution_time 6
		php_ini max_execution_time 7
	}
	#servers {
        #enable_full_duplex
    #}

    servers {
        #metrics
    }
}

:80 {

	route {
		# everything that is not in /assets is handled by your index or worker PHP file
        rewrite worker-with-counter.php
        php {
            root /go/src/app/testdata # explicitly adding the root here allows for better caching
        }
	}
}
